(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"146":function(e,t,a){},"151":function(e,t,a){"use strict";a.r(t);var n=a(14),r=a.n(n),s=a(18),c=a(3),o=a(4),l=a(9),u=a(10),i=a(0),p=a.n(i),m=a(30),d=a(98),g=a(103),f=a(99),h=a.n(f),v=a(112);h.a.defaults.baseURL="http://www.congb19.top/vmrs/api";var w=function(){var e=Object(s.a)(r.a.mark((function _callee(e){var t,a,n,s=arguments;return r.a.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(t=s.length>1&&void 0!==s[1]?s[1]:{},a=s.length>2&&void 0!==s[2]?s[2]:"GET",r.prev=2,"GET"!==a){r.next=9;break}return r.next=6,h.a.get(e,{"params":t});case 6:n=r.sent,r.next=12;break;case 9:return r.next=11,h.a.post(e,t);case 11:n=r.sent;case 12:return r.abrupt("return",n.data);case 15:if(r.prev=15,r.t0=r.catch(2),null!==r.t0&&void 0!==r.t0&&r.t0.response?(console.log("发生error，：",r.t0),m.default.atMessage({"message":"".concat(r.t0.response.data.code," ").concat(r.t0.response.data.msg),"type":"error"})):m.default.atMessage({"message":"网络错误","type":"error"}),null===r.t0||void 0===r.t0||!r.t0.response||"401"!==String(r.t0.response.status)){r.next=20;break}return r.abrupt("return",{"status":"401"});case 20:case"end":return r.stop()}}),_callee,null,[[2,15]])})));return function request(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(s.a)(r.a.mark((function _callee2(){var e,t;return r.a.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w("/public/getDate",{},"GET");case 2:e=a.sent;try{200===e.code&&(t=e.data)}catch(e){}return a.abrupt("return",t);case 5:case"end":return a.stop()}}),_callee2)})));return function getDate(){return e.apply(this,arguments)}}(),b=function setAuthorizationToken(e){e?h.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete h.a.defaults.headers.common.Authorization},k=function(){var e=Object(s.a)(r.a.mark((function _callee(e){var t,a;return r.a.wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w("/users/signup",e,"POST");case 2:return t=n.sent,console.log("signup, res: ",t),t&&(a=t.data.token,localStorage.setItem("token",a),b(a),console.log("token decode: ",Object(v.a)(a))),n.abrupt("return",t);case 6:case"end":return n.stop()}}),_callee)})));return function signup(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(s.a)(r.a.mark((function _callee2(e){var t,a;return r.a.wrap((function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w("/users/signin",e,"POST");case 2:return t=n.sent,console.log("signin, res: ",t),t&&(a=t.data.token,localStorage.setItem("token",a),b(a),console.log("token decode: ",Object(v.a)(a))),n.abrupt("return",t);case 6:case"end":return n.stop()}}),_callee2)})));return function signin(t){return e.apply(this,arguments)}}();a(146);a.d(t,"default",(function(){return x}));var x=function(e){Object(l.a)(Me,e);var t=Object(u.a)(Me);function Me(){var e;return Object(c.a)(this,Me),(e=t.apply(this,arguments)).state={"isLoggedIn":!1,"username":"","password":""},e}return Object(o.a)(Me,[{"key":"handleUsernameChange","value":function handleUsernameChange(e){this.setState({"username":e}),console.log(this.state)}},{"key":"handlePasswordChange","value":function handlePasswordChange(e){this.setState({"password":e}),console.log(this.state)}},{"key":"handleReset","value":function handleReset(){}},{"key":"onReady","value":function onReady(){console.log("onready me"),Object(s.a)(r.a.mark((function _callee(){var e;return r.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_();case 2:e=t.sent,console.log("rqDate",e);case 4:case"end":return t.stop()}}),_callee)})))()}},{"key":"signIn","value":function signIn(){var e=this;console.log("登录ing"),Object(s.a)(r.a.mark((function _callee2(){var t;return r.a.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,y(e.state);case 3:t=a.sent,console.log("res: ",t),200==(null==t?void 0:t.code)&&(e.setState({"isLoggedIn":!0}),m.default.atMessage({"message":"登录成功","type":"success"})),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("errrrrr",a.t0);case 11:case"end":return a.stop()}}),_callee2,null,[[0,8]])})))()}},{"key":"signUp","value":function signUp(){Object(s.a)(r.a.mark((function _callee3(){var e;return r.a.wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(data);case 2:e=t.sent,console.log("注册ing",e);case 4:case"end":return t.stop()}}),_callee3)})))()}},{"key":"signOut","value":function signOut(){}},{"key":"UserPage","value":function UserPage(){return p.a.createElement(d.View,{"className":"me"},p.a.createElement(g.AtMessage,null),p.a.createElement(d.View,{"className":"me-banner"}),p.a.createElement(d.View,{"className":"me-profile"},p.a.createElement(d.View,{"className":"me-profile__avatar"}),p.a.createElement(d.View,{"className":"me-profile__nickname"},"Congb19"),p.a.createElement(d.View,{"className":"me-profile__userid"},"通行证ID：7777"),p.a.createElement(d.View,{"className":"me-profile__tags"},p.a.createElement(g.AtTag,{"active":!0},"原神 Lv1"),p.a.createElement(g.AtTag,{"active":!0},"崩坏3 Lv1")),p.a.createElement(d.View,{"className":"me-profile__data"},p.a.createElement(d.Text,{"className":"me-profile__data--followers"},1," 粉丝"),p.a.createElement(d.Text,{"className":"me-profile__data--following"},1," 关注"),p.a.createElement(d.Text,{"className":"me-profile__data--likes"},1," 获赞"))))}},{"key":"GuestPage","value":function GuestPage(){return p.a.createElement(d.View,null,p.a.createElement(g.AtMessage,null),p.a.createElement(g.AtForm,{"onSubmit":this.signIn.bind(this),"onReset":this.handleReset.bind(this)},p.a.createElement(g.AtInput,{"name":"username","title":"用户名","type":"text","placeholder":"用户名","value":this.state.username,"onChange":this.handleUsernameChange.bind(this)}),p.a.createElement(g.AtInput,{"name":"password","title":"密码","type":"text","placeholder":"密码","value":this.state.password,"onChange":this.handlePasswordChange.bind(this)}),p.a.createElement(g.AtButton,{"formType":"submit"},"登录"),p.a.createElement(g.AtButton,{"formType":"reset"},"重置")))}},{"key":"render","value":function render(){return this.state.isLoggedIn?this.UserPage():this.GuestPage()}}]),Me}(i.Component)}}]);